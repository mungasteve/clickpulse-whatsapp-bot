<!DOCTYPE html>
<html>
<head>
    <title>ClickPulse Admin Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { background: #333; color: white; padding: 20px; border-radius: 5px; }
        .stats { display: flex; gap: 20px; margin: 20px 0; }
        .stat-card { background: #f4f4f4; padding: 20px; border-radius: 5px; flex: 1; }
        .products { margin: 20px 0; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid #ddd; text-align: left; }
        th { background: #f4f4f4; }
        .btn { padding: 8px 16px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ClickPulse Admin Dashboard</h1>
        </div>
        
        <div class="stats">
            <div class="stat-card">
                <h3>Total Products</h3>
                <p id="totalProducts">-</p>
            </div>
            <div class="stat-card">
                <h3>Total Stock</h3>
                <p id="totalStock">-</p>
            </div>
            <div class="stat-card">
                <h3>Total Value</h3>
                <p id="totalValue">-</p>
            </div>
        </div>

        <div class="products">
            <h2>Products</h2>
            <table id="productsTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Category</th>
                        <th>Stock</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        async function loadProducts() {
            try {
                const response = await fetch('http://localhost:5000/api/products');
                const products = await response.json();
                
                document.getElementById('totalProducts').textContent = products.length;
                document.getElementById('totalStock').textContent = products.reduce((sum, p) => sum + p.stock, 0);
                document.getElementById('totalValue').textContent = '$' + products.reduce((sum, p) => sum + (p.price * p.stock), 0);
                
                const tbody = document.querySelector('#productsTable tbody');
                tbody.innerHTML = products.map(product => `
                    <tr>
                        <td>${product.id}</td>
                        <td>${product.name}</td>
                        <td>$${product.price}</td>
                        <td>${product.category}</td>
                        <td>${product.stock}</td>
                        <td><button class="btn">Edit</button></td>
                    </tr>
                `).join('');
            } catch (error) {
                console.error('Error loading products:', error);
            }
        }

        loadProducts();
    </script>
</body>
</html>